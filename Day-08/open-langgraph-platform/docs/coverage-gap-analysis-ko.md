# Coverage Gap Analysis

> ìƒì„±ì¼: 2025-10-27
> ê¸°ì¤€ ì»¤ë²„ë¦¬ì§€: 70.0%
> ëª©í‘œ ì»¤ë²„ë¦¬ì§€: 85%+

## ì „ì²´ ìš”ì•½

- **ì „ì²´ ì»¤ë²„ë¦¬ì§€**: 70.0%
- **ì»¤ë²„ëœ ë¼ì¸**: 1,697 / 2,424
- **ëˆ„ë½ëœ ë¼ì¸**: 727
- **ëª©í‘œê¹Œì§€ í•„ìš”í•œ ì»¤ë²„ë¦¬ì§€**: 15.0%p

## ìš°ì„ ìˆœìœ„ë³„ ê°œì„  ëŒ€ìƒ

### ğŸ”´ ìš°ì„ ìˆœìœ„ 1: Critical (ì»¤ë²„ë¦¬ì§€ 50% ë¯¸ë§Œ)

**ì¦‰ì‹œ ê°œì„  í•„ìš”** - í•µì‹¬ ê¸°ëŠ¥ì´ì§€ë§Œ í…ŒìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ê°€ ë§¤ìš° ë‚®ìŒ

| íŒŒì¼ | ì»¤ë²„ë¦¬ì§€ | ëˆ„ë½ ë¼ì¸ | ì¹´í…Œê³ ë¦¬ | ë¹„ê³  |
|------|----------|-----------|----------|------|
| `health.py` | 0.0% | 74 | Core | í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸, ê°„ë‹¨í•˜ê²Œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥ |
| `main.py` | 0.0% | 60 | Other | ì•± ì‹œì‘ ì½”ë“œ, í†µí•© í…ŒìŠ¤íŠ¸ë¡œ ì»¤ë²„ |
| `streaming_service.py` | 24.4% | 121 | Service | SSE ìŠ¤íŠ¸ë¦¬ë° í•µì‹¬, ì¦‰ì‹œ ê°œì„  í•„ìš” |
| `runs.py` | 32.2% | 246 | API | ìµœëŒ€ API íŒŒì¼ (1425 lines), í•µì‹¬ ê¸°ëŠ¥ |
| `database.py` | 35.8% | 34 | Core | ì¸í”„ë¼ ë ˆì´ì–´, ì•ˆì •ì„± ì¤‘ìš” |
| `double_encoded_json.py` | 45.2% | 23 | Other | - |

### ğŸŸ¡ ìš°ì„ ìˆœìœ„ 2: High (ì»¤ë²„ë¦¬ì§€ 50-70%)

**ê°œì„  ê¶Œì¥** - ì£¼ìš” ê¸°ëŠ¥ì´ì§€ë§Œ ì»¤ë²„ë¦¬ì§€ ê°œì„  í•„ìš”

| íŒŒì¼ | ì»¤ë²„ë¦¬ì§€ | ëˆ„ë½ ë¼ì¸ | ì¹´í…Œê³ ë¦¬ |
|------|----------|-----------|----------|
| `auth_deps.py` | 52.6% | 9 | Core |

### ğŸŸ¢ ìš°ì„ ìˆœìœ„ 3: Medium (ì»¤ë²„ë¦¬ì§€ 70-80%)

**ì„ íƒì  ê°œì„ ** - ê¸°ë³¸ì ì¸ ì»¤ë²„ë¦¬ì§€ëŠ” í™•ë³´, ì—£ì§€ ì¼€ì´ìŠ¤ í…ŒìŠ¤íŠ¸ ì¶”ê°€

| íŒŒì¼ | ì»¤ë²„ë¦¬ì§€ | ëˆ„ë½ ë¼ì¸ | ì¹´í…Œê³ ë¦¬ |
|------|----------|-----------|----------|
| `threads.py` | 70.5% | 67 | API |
| `thread_state_service.py` | 76.3% | 14 | Service |
| `broker.py` | 76.5% | 20 | Service |
| `errors.py` | 77.8% | 2 | Model |

## ìƒì„¸ ë¶„ì„: Critical íŒŒì¼ ë¯¸ì»¤ë²„ ë¼ì¸

### `health.py` (0.0%)

**íŒŒì¼ ê²½ë¡œ**: `src/agent_server/core/health.py`

**í†µê³„**:
- ì „ì²´ ë¼ì¸: 74
- ì»¤ë²„ëœ ë¼ì¸: 0
- ëˆ„ë½ëœ ë¼ì¸: 74

**ë¯¸ì»¤ë²„ ë¼ì¸ ë²”ìœ„** (30ê°œ ë¸”ë¡):
- Line 3
- Lines 5-7 (3 lines)
- Line 9
- Line 12
- Lines 15-18 (4 lines)
- Line 21
- Lines 24-27 (4 lines)
- Lines 30-31 (2 lines)
- Line 33
- Lines 41-42 (2 lines)
- ... ì™¸ 20ê°œ ë¸”ë¡

### `main.py` (0.0%)

**íŒŒì¼ ê²½ë¡œ**: `src/agent_server/main.py`

**í†µê³„**:
- ì „ì²´ ë¼ì¸: 60
- ì»¤ë²„ëœ ë¼ì¸: 0
- ëˆ„ë½ëœ ë¼ì¸: 60

**ë¯¸ì»¤ë²„ ë¼ì¸ ë²”ìœ„** (34ê°œ ë¸”ë¡):
- Lines 42-47 (6 lines)
- Line 49
- Line 53
- Lines 58-61 (4 lines)
- Line 64
- Lines 66-69 (4 lines)
- Lines 71-79 (9 lines)
- Line 87
- Line 89
- Lines 92-93 (2 lines)
- ... ì™¸ 24ê°œ ë¸”ë¡

### `streaming_service.py` (24.4%)

**íŒŒì¼ ê²½ë¡œ**: `src/agent_server/services/streaming_service.py`

**í†µê³„**:
- ì „ì²´ ë¼ì¸: 160
- ì»¤ë²„ëœ ë¼ì¸: 39
- ëˆ„ë½ëœ ë¼ì¸: 121

**ë¯¸ì»¤ë²„ ë¼ì¸ ë²”ìœ„** (52ê°œ ë¸”ë¡):
- Lines 135-143 (9 lines)
- Lines 173-174 (2 lines)
- Line 177
- Lines 180-181 (2 lines)
- Line 183
- Line 220
- Lines 223-224 (2 lines)
- Lines 227-229 (3 lines)
- Lines 231-232 (2 lines)
- Lines 234-235 (2 lines)
- ... ì™¸ 42ê°œ ë¸”ë¡

### `runs.py` (32.2%)

**íŒŒì¼ ê²½ë¡œ**: `src/agent_server/api/runs.py`

**í†µê³„**:
- ì „ì²´ ë¼ì¸: 363
- ì»¤ë²„ëœ ë¼ì¸: 117
- ëˆ„ë½ëœ ë¼ì¸: 246

**ë¯¸ì»¤ë²„ ë¼ì¸ ë²”ìœ„** (124ê°œ ë¸”ë¡):
- Lines 95-97 (3 lines)
- Lines 99-100 (2 lines)
- Line 104
- Line 106
- Line 134
- Line 139
- Line 169
- Lines 172-175 (4 lines)
- Line 181
- Line 186
- ... ì™¸ 114ê°œ ë¸”ë¡

### `database.py` (35.8%)

**íŒŒì¼ ê²½ë¡œ**: `src/agent_server/core/database.py`

**í†µê³„**:
- ì „ì²´ ë¼ì¸: 53
- ì»¤ë²„ëœ ë¼ì¸: 19
- ëˆ„ë½ëœ ë¼ì¸: 34

**ë¯¸ì»¤ë²„ ë¼ì¸ ë²”ìœ„** (14ê°œ ë¸”ë¡):
- Line 53
- Line 61
- Lines 64-66 (3 lines)
- Line 72
- Lines 80-81 (2 lines)
- Lines 84-87 (4 lines)
- Lines 89-92 (4 lines)
- Line 94
- Lines 116-119 (4 lines)
- Line 122
- ... ì™¸ 4ê°œ ë¸”ë¡

## í…ŒìŠ¤íŠ¸ ì‘ì„± ê°€ì´ë“œ

### Critical íŒŒì¼ ìš°ì„ ìˆœìœ„

1. **runs.py** (32.2%)
   - [ ] ì—ëŸ¬ í•¸ë“¤ë§ ê²½ë¡œ í…ŒìŠ¤íŠ¸
   - [ ] ìŠ¤íŠ¸ë¦¬ë° ì¬ì—°ê²° ì‹œë‚˜ë¦¬ì˜¤
   - [ ] Run ì·¨ì†Œ ë° ì‚­ì œ í”Œë¡œìš°
   - [ ] Human-in-the-Loop ì „ì²´ í”Œë¡œìš°

2. **streaming_service.py** (24.4%)
   - [ ] SSE ì—°ê²° ëŠê¹€ ì²˜ë¦¬
   - [ ] ì´ë²¤íŠ¸ ì¬ìƒ ë¡œì§
   - [ ] ë™ì‹œ ìŠ¤íŠ¸ë¦¬ë° í´ë¼ì´ì–¸íŠ¸
   - [ ] ë¸Œë¡œì»¤ ì‹¤íŒ¨ ì‹œë‚˜ë¦¬ì˜¤

3. **database.py** (35.8%)
   - [ ] ì´ˆê¸°í™” ì‹¤íŒ¨ ì²˜ë¦¬
   - [ ] ì—°ê²° í’€ ì†Œì§„ ì‹œë‚˜ë¦¬ì˜¤
   - [ ] LangGraph ì»´í¬ë„ŒíŠ¸ setup ì‹¤íŒ¨

## 85% ì»¤ë²„ë¦¬ì§€ ë‹¬ì„± ì „ëµ

**í˜„ì¬**: 70.0%
**ëª©í‘œ**: 85.0%
**ê°­**: 15.0%p (364 lines)

### ë‹¨ê³„ë³„ ì‹¤í–‰ ê³„íš

1. **Phase 1** (70% â†’ 75%): Critical íŒŒì¼ ì§‘ì¤‘ ê°œì„ 
   - runs.py 50% â†’ 70% (+20%p)
   - streaming_service.py 24% â†’ 60% (+36%p)
   - ì˜ˆìƒ ê¸°ê°„: 1ì£¼

2. **Phase 2** (75% â†’ 80%): High íŒŒì¼ ê°œì„ 
   - database.py 36% â†’ 60% (+24%p)
   - threads.py 70% â†’ 80% (+10%p)
   - ì˜ˆìƒ ê¸°ê°„: 1ì£¼

3. **Phase 3** (80% â†’ 85%): Medium íŒŒì¼ + ì—£ì§€ ì¼€ì´ìŠ¤
   - ëª¨ë“  70-80% íŒŒì¼ì„ 85%+ ë¡œ ê°œì„ 
   - ì—£ì§€ ì¼€ì´ìŠ¤ ë° ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”
   - ì˜ˆìƒ ê¸°ê°„: 1ì£¼

