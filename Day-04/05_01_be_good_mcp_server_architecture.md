### 좋은 MCP 서버를 설계하는 방법
MCP(Model Context Protocol) 기반 도구 설계 전 과정에서의 효율 극대화를 목표로, 
다음 네 가지 포인트를 중심으로 한 설계 원칙과 우선순위를 제시합니다: 
  1) 간결-직관적 도구 정의
  2) LLM 호출 최소화(식별자 전략-통합 설계)
  3) 토큰 절감을 위한 입-출력 간결화
  4) 명확-친절한 출력 메시지 설계

### 1) 간결하고 직관적인 도구 정의
- **핵심 원칙**: 도구의 이름과 설명은 1문장, 입력은 필수 최소화(가급적 ≤3개). 불필요한 선택 인자는 배제.
- **네이밍 규칙**: `service_action_target` 형태 일관화 예) `slack_send_message`, `github_create_issue`.
- **보편 지식 활용**: Slack, GitHub 등 널리 알려진 도메인의 암묵지에 기대어 설명을 압축.
- **선행 도구 명시**: 의존 순서를 입력 스키마 설명에 명시하여 호출 순서 혼선을 방지.
- **분리 기준**: 복잡 옵션-고급 기능은 별도 도구로 분리해 기본 도구를 단순화.
- **우선순위**: (매우 높음) 이름-설명 간결화 → (다소 높음) 필수 파라미터 최소화 → (중간) 선행 도구 안내 → (낮음) 고급 기능 분리.


### 2) LLM 호출 최소화(식별자 전략-통합 설계)
- **식별자 전략**: 내부 식별자(키/ID)와 사용자 친화 식별자(이메일-제목 등) 간 간극을 도구 내부에서 흡수.
- **단일 도구 통합**: 동일 목적의 2단계 호출을 피하고, 입력에 자연키/내부 ID 모두 수용해 내부에서 변환-분기.
- **사례**: Slack 채널/사용자 이름-ID를 `channel` 하나로 통합 입력 → 내부에서 이름→ID 해석 후 전송.
- **모호성 처리**: 
  - 명확성 요구 메시지로 추가 정보(작성자/날짜 등) 요청, 또는
  - 후보 목록 반환→선택 유도(옵션+요약 정보).
- **복합 작업 캡슐화**: 다단계 시퀀스를 하나의 도구로 래핑하되, 과도한 통합으로 재사용성을 훼손하지 않도록 균형 유지.
- **오류-보안**: 식별자 미발견-권한 부족 등은 구체적이고 조치 가능한 메시지로 안내. 자연어 입력은 검증-이스케이프 처리로 인젝션 대비.


### 3) 토큰 절감을 위한 입-출력 간결화
- **입력 최소화**: 필수값만 요구, 선택 인자는 실제 필요 시에만 도입.
- **스마트 기본값**: 합리적 디폴트(예: 회의 `duration=60`)로 입력 축소.
- **출력 선별**: HATEOAS-메타데이터 등 불필요 정보를 제거하고 핵심 필드만 반환. 맥락 파악에 유익한 URL은 선별 포함.
- **형식 통일(Markdown)**: Slack Block Kit, Notion Blocks 등 이질 포맷을 Markdown으로 표준화하여 해석 비용 절감. 필요 시 `markitdown` 활용.
- **특화 기능 처리**: 버튼-DB 뷰 등 완전 변환 곤란 시 핵심 내용만 Markdown으로 제공하고, 상호작용은 외부 앱 사용을 안내.
- **정량 효과**: 출력 간결화로 약 50% 수준의 토큰 절감이 가능.
- **우선순위**: (높음) 입력 ≤3개, 출력에서 링크/메타 제거 → (중간) 포맷 Markdown 통일 → (낮음) 특화 기능 보조 정보.


### 4) 명확하고 친절한 출력 메시지 설계
- **오류 메시지 요건**: 타입, 구체 메시지, 문제 필드, 수정 제안-대안 도구를 함께 제공.
  - 유형 예: 권한, 리소스 없음, 레이트 리밋(재시도 시각 포함) 등.
- **성공 메시지 강화**: 리소스 식별자/URL과 함께 가능한 다음 행동(`next_actions`)을 제시하여 후속 흐름을 가이드.
- **부분적 성공-경고**: 성공/실패 항목을 분리 보고하고, 경고와 조치 제안을 병기.
- **진행형 작업**: 상태-진척도-예상 완료 시각-모니터링 URL-다음 조회 시점 안내.
- **사용자 확인 필요 시**: 옵션 목록과 명확한 선택 지시(`instruction`) 제공.
- **우선순위-체크리스트**:
  - 우선: 오류에 수정 방향 포함, 성공에 URL+다음 행동 포함.
  - 중간: 부분 성공/경고 구분.
  - 체크: 구조화-간결성-친화적 톤-불필요 기술 세부 제거.


### 정리
- **복잡성은 내부로 캡슐화하고, 인터페이스는 단순-명확하게 유지**하십시오.
- **호출 수와 토큰 사용량을 동시 최소화**하여 비용과 지연을 줄이고, 에이전트의 작업 지속 능력을 높이십시오.
- **오류-성공 메시지는 실행 가능성 중심으로 설계**하여 재시도 루프를 방지하고, 사용자의 다음 행동을 자연스럽게 이끕니다.
- **보안-중복-모호성-재사용성 간 균형**을 유지하며, 실제 사용 피드백을 통해 점진적으로 개선하십시오.

---

- 핵심 요약
  - 도구 정의는 간결성-일관성-명확한 의존 관계 표기로 설계.
  - 식별자 전략과 통합 설계로 호출 수를 1회로 수렴.
  - 입력-출력 최소화와 Markdown 통일로 토큰 절감.
  - 오류/성공/부분 성공/진행형/확인요청 메시지를 표준화해 에이전트 자율성과 UX를 향상.